{"version":3,"sources":["webpack:///webpack/bootstrap c35bf57ecf8e05226b15","webpack:///./embed/embed.js","webpack:///./embed/MessageManager.js","webpack:///./embed/ObjectConverter.js"],"names":["on","window","GrimoireJS","observeRoot","element","observer","MutationObserver","mutations","forEach","mutation","type","i","addedNodes","length","addedNode","post","parent","fromElement","parentElement","root","observe","attributes","childList","characterData","subtree","m","node","nodeDictionary","key","components","_components","map","fromComponent","nodeName","name","className","id","rootNodes","result","rootNode","scriptElement","companion","get","MessageManager","handlers","addEventListener","onRecieve","bind","message","data","$source","Error","packet","Object","assign","postMessage","handler","ObjectConverter","noRecursive","children","push","getAttribute","tagName","component","toArray","fromAttribute","attr","converter","declaration","value","Value","rawElements","isColor","isVector","indexOf","eularAngles","e","toString"],"mappings":"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","file":"./lib/embed.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c35bf57ecf8e05226b15","import MessageManager from \"./MessageManager\";\nimport ObjectConverter from \"./ObjectConverter\";\nMessageManager.on(\"sync-devtool\", function() {\n    if(!!window.GrimoireJS) {\n        function observeRoot(element) {\n            const observer = new MutationObserver((mutations) => {\n                mutations.forEach((mutation) => {\n                    if (mutation.type === \"childList\") {\n                        for (let i = 0; i < mutation.addedNodes.length; i++) {\n                            const addedNode = mutation.addedNodes[i];\n                            MessageManager.post({\n                                type: \"node-added\",\n                                parent: ObjectConverter.fromElement(addedNode.parentElement),\n                                addedNode: ObjectConverter.fromElement(addedNode),\n                                root: ObjectConverter.fromElement(element)\n                            })\n                        }\n                    }\n                });\n            });\n            observer.observe(element, {\n                attributes: true,\n                childList: true,\n                characterData: true,\n                subtree: true\n            });\n        }\n\n        MessageManager.on(\"fetch-node\", function(m) {\n            const node = window.GrimoireJS.nodeDictionary[m.key];\n            if (!node) {\n                return;\n            }\n            const components = node._components.map(m=>ObjectConverter.fromComponent(m));\n            MessageManager.post({\n                type: \"node-info\",\n                nodeName: node.name.name,\n                className: node.element.className,\n                id: node.element.id,\n                components: components\n            });\n        });\n\n        for (let key in window.GrimoireJS.rootNodes) {\n            const root = window.GrimoireJS.rootNodes[key];\n            MessageManager.post({\n                type: \"new-tree\",\n                result: {\n                    key: key,\n                    rootNode: ObjectConverter.fromElement(root.element),\n                    scriptElement: ObjectConverter.fromElement(root.companion.get(\"scriptElement\"), true)\n                }\n            });\n            observeRoot(root.element);\n        }\n    }\n});\nMessageManager.post({\n    type: \"initialize\"\n});\n\n\n\n// WEBPACK FOOTER //\n// ./embed/embed.js","class MessageManager {\n    constructor() {\n      this.handlers = {};\n      window.addEventListener(\"message\",this.onRecieve.bind(this));\n    }\n\n    onRecieve(message){\n      if(message.data.$source !== \"grimoire-inspector-dev-tool\"){\n        return;\n      }\n      if(this.handlers[message.data.type]){\n        this.handlers[message.data.type](message.data);\n      }else{\n        throw new Error(\"No handler found for \" + message.data.type);\n      }\n    }\n\n    post(message) {\n        const packet = Object.assign({\n            $source: \"grimoire-inspector\"\n        }, message);\n        if(packet.type === void 0){\n          throw new Error(\"Type must be specified\");\n        }\n        window.postMessage(packet, \"*\");\n    }\n\n    on(type,handler){\n      this.handlers[type] = handler;\n    }\n}\n\nexport default new MessageManager();\n\n\n\n// WEBPACK FOOTER //\n// ./embed/MessageManager.js","class ObjectConverter {\n    fromElement(element, noRecursive) {\n        let children;\n        if (!noRecursive) {\n            children = [];\n            for (let i = 0; i < element.children.length; i++) {\n                children.push(this.fromElement(element.children[i]));\n            }\n        }\n        return {\n            key: element.getAttribute(\"x-gr-id\"),\n            className: element.className,\n            tagName: element.tagName,\n            id: element.id,\n            children: children\n        };\n    }\n\n    fromComponent(component) {\n        return {\n            name: component.name.name,\n            attributes: component.attributes.toArray().map(m => this.fromAttribute(m))\n        };\n    }\n\n    fromAttribute(attr) {\n        try {\n            const converter = attr.declaration.converter;\n            switch (converter) {\n                case \"Number\":\n                case \"String\":\n                case \"Angle2D\":\n                case \"Boolean\":\n                    return {\n                        name: attr.name.name,\n                        value: attr.Value\n                    };\n                case \"Color3\":\n                case \"Color4\":\n                    return {\n                        name: attr.name.name,\n                        value: attr.Value.rawElements,\n                        isColor: true\n                    };\n                case \"Vector2\":\n                case \"Vector3\":\n                case \"Vector4\":\n                    return {\n                        name: attr.name.name,\n                        value: attr.Value.rawElements,\n                        isVector: true,\n                        length: [\"Vector2\", \"Vector3\", \"Vector4\"].indexOf(converter) + 2\n                    };\n                case \"Rotation3\":\n                    return {\n                        name: attr.name.name,\n                        value: attr.Value.eularAngles.rawElements,\n                        isVector: true,\n                        length: 3\n                    };\n                default:\n                    return {\n                        name: attr.name.name,\n                        value: !!attr.Value ? \"(Object)[Non Editable]\" : \"(null or undefined)[Non Editable]\"\n                    };\n            }\n        } catch (e) {\n            return {\n                name: attr.name.name,\n                value: e.toString()\n            };\n        }\n    }\n}\n\nexport default new ObjectConverter();\n\n\n\n// WEBPACK FOOTER //\n// ./embed/ObjectConverter.js"],"sourceRoot":""}