{"version":3,"sources":["webpack:///webpack/bootstrap 3e7e87885e31ea4c62ad","webpack:///./embed/embed.js","webpack:///./embed/MessageManager.js"],"names":["on","window","GrimoireJS","elementToObject","element","noRecursive","children","i","length","push","key","getAttribute","className","tagName","id","attributeToObject","attr","converter","declaration","name","value","Value","rawElements","isColor","isVector","indexOf","eularAngles","e","toString","componentToObject","component","attributes","toArray","map","m","observeRoot","observer","MutationObserver","mutations","forEach","mutation","type","addedNodes","addedNode","post","parent","parentElement","root","observe","childList","characterData","subtree","node","nodeDictionary","components","_components","arr","Array","nodeName","rootNodes","result","rootNode","scriptElement","companion","get","MessageManager","handlers","addEventListener","onRecieve","bind","message","data","$source","Error","packet","Object","assign","postMessage","handler"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;ACtCA;;;;;;AAEA,0BAAeA,EAAf,CAAkB,cAAlB,EAAkC,YAAW;AACzC,SAAG,CAAC,CAACC,OAAOC,UAAZ,EAAwB;AAAA;AAAA,iBACXC,eADW,GACpB,SAASA,eAAT,CAAyBC,OAAzB,EAAkCC,WAAlC,EAA+C;AAC3C,qBAAIC,iBAAJ;AACA,qBAAI,CAACD,WAAL,EAAkB;AACdC,gCAAW,EAAX;AACA,0BAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIH,QAAQE,QAAR,CAAiBE,MAArC,EAA6CD,GAA7C,EAAkD;AAC9CD,kCAASG,IAAT,CAAcN,gBAAgBC,QAAQE,QAAR,CAAiBC,CAAjB,CAAhB,CAAd;AACH;AACJ;AACD,wBAAO;AACHG,0BAAKN,QAAQO,YAAR,CAAqB,SAArB,CADF;AAEHC,gCAAWR,QAAQQ,SAFhB;AAGHC,8BAAST,QAAQS,OAHd;AAIHC,yBAAIV,QAAQU,EAJT;AAKHR,+BAAUA;AALP,kBAAP;AAOH,cAhBmB;;AAAA,iBAkBXS,iBAlBW,GAkBpB,SAASA,iBAAT,CAA2BC,IAA3B,EAAiC;AAC7B,qBAAI;AACA,yBAAMC,YAAYD,KAAKE,WAAL,CAAiBD,SAAnC;AACA,6BAAQA,SAAR;AACI,8BAAK,QAAL;AACA,8BAAK,QAAL;AACA,8BAAK,SAAL;AACA,8BAAK,SAAL;AACI,oCAAO;AACHE,uCAAMH,KAAKG,IAAL,CAAUA,IADb;AAEHC,wCAAOJ,KAAKK;AAFT,8BAAP;AAIJ,8BAAK,QAAL;AACA,8BAAK,QAAL;AACI,oCAAO;AACHF,uCAAMH,KAAKG,IAAL,CAAUA,IADb;AAEHC,wCAAOJ,KAAKK,KAAL,CAAWC,WAFf;AAGHC,0CAAS;AAHN,8BAAP;AAKJ,8BAAK,SAAL;AACA,8BAAK,SAAL;AACA,8BAAK,SAAL;AACI,oCAAO;AACHJ,uCAAMH,KAAKG,IAAL,CAAUA,IADb;AAEHC,wCAAOJ,KAAKK,KAAL,CAAWC,WAFf;AAGHE,2CAAU,IAHP;AAIHhB,yCAAQ,CAAC,SAAD,EAAY,SAAZ,EAAuB,SAAvB,EAAkCiB,OAAlC,CAA0CR,SAA1C,IAAuD;AAJ5D,8BAAP;AAMJ,8BAAK,WAAL;AACI,oCAAO;AACHE,uCAAMH,KAAKG,IAAL,CAAUA,IADb;AAEHC,wCAAOJ,KAAKK,KAAL,CAAWK,WAAX,CAAuBJ,WAF3B;AAGHE,2CAAU,IAHP;AAIHhB,yCAAQ;AAJL,8BAAP;AAMJ;AACI,oCAAO;AACHW,uCAAMH,KAAKG,IAAL,CAAUA,IADb;AAEHC,wCAAO,CAAC,CAACJ,KAAKK,KAAP,GAAe,wBAAf,GAA0C;AAF9C,8BAAP;AAjCR;AAsCH,kBAxCD,CAwCE,OAAOM,CAAP,EAAU;AACR,4BAAO;AACHR,+BAAMH,KAAKG,IAAL,CAAUA,IADb;AAEHC,gCAAOO,EAAEC,QAAF;AAFJ,sBAAP;AAIH;AACJ,cAjEmB;;AAAA,iBAmEXC,iBAnEW,GAmEpB,SAASA,iBAAT,CAA2BC,SAA3B,EAAsC;AAClC,wBAAO;AACHX,2BAAMW,UAAUX,IAAV,CAAeA,IADlB;AAEHY,iCAAYD,UAAUC,UAAV,CAAqBC,OAArB,GAA+BC,GAA/B,CAAmC;AAAA,gCAAKlB,kBAAkBmB,CAAlB,CAAL;AAAA,sBAAnC;AAFT,kBAAP;AAIH,cAxEmB;;AAAA,iBA0EXC,WA1EW,GA0EpB,SAASA,WAAT,CAAqB/B,OAArB,EAA8B;AAC1B,qBAAMgC,WAAW,IAAIC,gBAAJ,CAAqB,UAACC,SAAD,EAAe;AACjDA,+BAAUC,OAAV,CAAkB,UAACC,QAAD,EAAc;AAC5B,6BAAIA,SAASC,IAAT,KAAkB,WAAtB,EAAmC;AAC/B,kCAAK,IAAIlC,IAAI,CAAb,EAAgBA,IAAIiC,SAASE,UAAT,CAAoBlC,MAAxC,EAAgDD,GAAhD,EAAqD;AACjD,qCAAMoC,YAAYH,SAASE,UAAT,CAAoBnC,CAApB,CAAlB;AACA,0DAAeqC,IAAf,CAAoB;AAChBH,2CAAM,YADU;AAEhBI,6CAAQ1C,gBAAgBwC,UAAUG,aAA1B,CAFQ;AAGhBH,gDAAWxC,gBAAgBwC,SAAhB,CAHK;AAIhBI,2CAAM5C,gBAAgBC,OAAhB;AAJU,kCAApB;AAMH;AACJ;AACJ,sBAZD;AAaH,kBAdgB,CAAjB;AAeAgC,0BAASY,OAAT,CAAiB5C,OAAjB,EAA0B;AACtB2B,iCAAY,IADU;AAEtBkB,gCAAW,IAFW;AAGtBC,oCAAe,IAHO;AAItBC,8BAAS;AAJa,kBAA1B;AAMH,cAhGmB;;AAkGpB,sCAAenD,EAAf,CAAkB,YAAlB,EAAgC,UAASkC,CAAT,EAAY;AACxC,qBAAMkB,OAAOnD,OAAOC,UAAP,CAAkBmD,cAAlB,CAAiCnB,EAAExB,GAAnC,CAAb;AACA,qBAAI,CAAC0C,IAAL,EAAW;AACP;AACH;AACD,qBAAME,aAAaF,KAAKG,WAAxB;AACA,qBAAMC,MAAM,IAAIC,KAAJ,CAAUH,WAAW9C,MAArB,CAAZ;AACA,sBAAK,IAAID,IAAI,CAAb,EAAgBA,IAAIiD,IAAIhD,MAAxB,EAAgCD,GAAhC,EAAqC;AACjCiD,yBAAIjD,CAAJ,IAASsB,kBAAkByB,WAAW/C,CAAX,CAAlB,CAAT;AACH;AACD,0CAAeqC,IAAf,CAAoB;AAChBH,2BAAM,WADU;AAEhBiB,+BAAUN,KAAKjC,IAAL,CAAUA,IAFJ;AAGhBP,gCAAWwC,KAAKhD,OAAL,CAAaQ,SAHR;AAIhBE,yBAAIsC,KAAKhD,OAAL,CAAaU,EAJD;AAKhBwC,iCAAYE;AALI,kBAApB;AAOH,cAjBD;;AAmBA,kBAAK,IAAI9C,GAAT,IAAgBT,OAAOC,UAAP,CAAkByD,SAAlC,EAA6C;AACzC,qBAAMZ,OAAO9C,OAAOC,UAAP,CAAkByD,SAAlB,CAA4BjD,GAA5B,CAAb;AACA,0CAAekC,IAAf,CAAoB;AAChBH,2BAAM,UADU;AAEhBmB,6BAAQ;AACJlD,8BAAKA,GADD;AAEJmD,mCAAU1D,gBAAgB4C,KAAK3C,OAArB,CAFN;AAGJ0D,wCAAe3D,gBAAgB4C,KAAKgB,SAAL,CAAeC,GAAf,CAAmB,eAAnB,CAAhB,EAAqD,IAArD;AAHX;AAFQ,kBAApB;AAQA7B,6BAAYY,KAAK3C,OAAjB;AACH;AAhImB;AAiIvB;AACJ,EAnID;AAoIA,0BAAewC,IAAf,CAAoB;AAChBH,WAAM;AADU,EAApB,E;;;;;;;;;;;;;;;;KCtIMwB,c;AACF,6BAAc;AAAA;;AACZ,UAAKC,QAAL,GAAgB,EAAhB;AACAjE,YAAOkE,gBAAP,CAAwB,SAAxB,EAAkC,KAAKC,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAAlC;AACD;;;;+BAESC,O,EAAQ;AAChB,WAAGA,QAAQC,IAAR,CAAaC,OAAb,KAAyB,6BAA5B,EAA0D;AACxD;AACD;AACD,WAAG,KAAKN,QAAL,CAAcI,QAAQC,IAAR,CAAa9B,IAA3B,CAAH,EAAoC;AAClC,cAAKyB,QAAL,CAAcI,QAAQC,IAAR,CAAa9B,IAA3B,EAAiC6B,QAAQC,IAAzC;AACD,QAFD,MAEK;AACH,eAAM,IAAIE,KAAJ,CAAU,kBAAV,CAAN;AACD;AACF;;;0BAEIH,O,EAAS;AACV,WAAMI,SAASC,OAAOC,MAAP,CAAc;AACzBJ,kBAAS;AADgB,QAAd,EAEZF,OAFY,CAAf;AAGA,WAAGI,OAAOjC,IAAP,KAAgB,KAAK,CAAxB,EAA0B;AACxB,eAAM,IAAIgC,KAAJ,CAAU,wBAAV,CAAN;AACD;AACDxE,cAAO4E,WAAP,CAAmBH,MAAnB,EAA2B,GAA3B;AACH;;;wBAEEjC,I,EAAKqC,O,EAAQ;AACd,YAAKZ,QAAL,CAAczB,IAAd,IAAsBqC,OAAtB;AACD;;;;;;mBAGU,IAAIb,cAAJ,E","file":"./lib/embed.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3e7e87885e31ea4c62ad","import MessageManager from \"./MessageManager\";\n\nMessageManager.on(\"sync-devtool\", function() {\n    if(!!window.GrimoireJS) {\n        function elementToObject(element, noRecursive) {\n            let children;\n            if (!noRecursive) {\n                children = [];\n                for (let i = 0; i < element.children.length; i++) {\n                    children.push(elementToObject(element.children[i]));\n                }\n            }\n            return {\n                key: element.getAttribute(\"x-gr-id\"),\n                className: element.className,\n                tagName: element.tagName,\n                id: element.id,\n                children: children\n            };\n        }\n\n        function attributeToObject(attr) {\n            try {\n                const converter = attr.declaration.converter;\n                switch (converter) {\n                    case \"Number\":\n                    case \"String\":\n                    case \"Angle2D\":\n                    case \"Boolean\":\n                        return {\n                            name: attr.name.name,\n                            value: attr.Value\n                        };\n                    case \"Color3\":\n                    case \"Color4\":\n                        return {\n                            name: attr.name.name,\n                            value: attr.Value.rawElements,\n                            isColor: true\n                        };\n                    case \"Vector2\":\n                    case \"Vector3\":\n                    case \"Vector4\":\n                        return {\n                            name: attr.name.name,\n                            value: attr.Value.rawElements,\n                            isVector: true,\n                            length: [\"Vector2\", \"Vector3\", \"Vector4\"].indexOf(converter) + 2\n                        };\n                    case \"Rotation3\":\n                        return {\n                            name: attr.name.name,\n                            value: attr.Value.eularAngles.rawElements,\n                            isVector: true,\n                            length: 3\n                        };\n                    default:\n                        return {\n                            name: attr.name.name,\n                            value: !!attr.Value ? \"(Object)[Non Editable]\" : \"(null or undefined)[Non Editable]\"\n                        };\n                }\n            } catch (e) {\n                return {\n                    name: attr.name.name,\n                    value: e.toString()\n                };\n            }\n        }\n\n        function componentToObject(component) {\n            return {\n                name: component.name.name,\n                attributes: component.attributes.toArray().map(m => attributeToObject(m))\n            };\n        }\n\n        function observeRoot(element) {\n            const observer = new MutationObserver((mutations) => {\n                mutations.forEach((mutation) => {\n                    if (mutation.type === \"childList\") {\n                        for (let i = 0; i < mutation.addedNodes.length; i++) {\n                            const addedNode = mutation.addedNodes[i];\n                            MessageManager.post({\n                                type: \"node-added\",\n                                parent: elementToObject(addedNode.parentElement),\n                                addedNode: elementToObject(addedNode),\n                                root: elementToObject(element)\n                            })\n                        }\n                    }\n                });\n            });\n            observer.observe(element, {\n                attributes: true,\n                childList: true,\n                characterData: true,\n                subtree: true\n            });\n        }\n\n        MessageManager.on(\"fetch-node\", function(m) {\n            const node = window.GrimoireJS.nodeDictionary[m.key];\n            if (!node) {\n                return;\n            }\n            const components = node._components;\n            const arr = new Array(components.length);\n            for (let i = 0; i < arr.length; i++) {\n                arr[i] = componentToObject(components[i]);\n            }\n            MessageManager.post({\n                type: \"node-info\",\n                nodeName: node.name.name,\n                className: node.element.className,\n                id: node.element.id,\n                components: arr\n            });\n        });\n\n        for (let key in window.GrimoireJS.rootNodes) {\n            const root = window.GrimoireJS.rootNodes[key];\n            MessageManager.post({\n                type: \"new-tree\",\n                result: {\n                    key: key,\n                    rootNode: elementToObject(root.element),\n                    scriptElement: elementToObject(root.companion.get(\"scriptElement\"), true)\n                }\n            });\n            observeRoot(root.element);\n        }\n    }\n});\nMessageManager.post({\n    type: \"initialize\"\n});\n\n\n\n// WEBPACK FOOTER //\n// ./embed/embed.js","class MessageManager {\n    constructor() {\n      this.handlers = {};\n      window.addEventListener(\"message\",this.onRecieve.bind(this));\n    }\n\n    onRecieve(message){\n      if(message.data.$source !== \"grimoire-inspector-dev-tool\"){\n        return;\n      }\n      if(this.handlers[message.data.type]){\n        this.handlers[message.data.type](message.data);\n      }else{\n        throw new Error(\"No handler found\");\n      }\n    }\n\n    post(message) {\n        const packet = Object.assign({\n            $source: \"grimoire-inspector\"\n        }, message);\n        if(packet.type === void 0){\n          throw new Error(\"Type must be specified\");\n        }\n        window.postMessage(packet, \"*\");\n    }\n\n    on(type,handler){\n      this.handlers[type] = handler;\n    }\n}\n\nexport default new MessageManager();\n\n\n\n// WEBPACK FOOTER //\n// ./embed/MessageManager.js"],"sourceRoot":""}