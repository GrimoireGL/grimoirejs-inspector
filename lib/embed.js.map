{"version":3,"sources":["webpack:///webpack/bootstrap 113c876654ac79245faf","webpack:///./src/embed/embed.js","webpack:///./src/embed/MessageManager.js","webpack:///./~/babel-runtime/core-js/object/assign.js","webpack:///./~/core-js/library/fn/object/assign.js","webpack:///./~/core-js/library/modules/es6.object.assign.js","webpack:///./~/core-js/library/modules/_export.js","webpack:///./~/core-js/library/modules/_global.js","webpack:///./~/core-js/library/modules/_core.js","webpack:///./~/core-js/library/modules/_ctx.js","webpack:///./~/core-js/library/modules/_a-function.js","webpack:///./~/core-js/library/modules/_hide.js","webpack:///./~/core-js/library/modules/_object-dp.js","webpack:///./~/core-js/library/modules/_an-object.js","webpack:///./~/core-js/library/modules/_is-object.js","webpack:///./~/core-js/library/modules/_ie8-dom-define.js","webpack:///./~/core-js/library/modules/_descriptors.js","webpack:///./~/core-js/library/modules/_fails.js","webpack:///./~/core-js/library/modules/_dom-create.js","webpack:///./~/core-js/library/modules/_to-primitive.js","webpack:///./~/core-js/library/modules/_property-desc.js","webpack:///./~/core-js/library/modules/_object-assign.js","webpack:///./~/core-js/library/modules/_object-keys.js","webpack:///./~/core-js/library/modules/_object-keys-internal.js","webpack:///./~/core-js/library/modules/_has.js","webpack:///./~/core-js/library/modules/_to-iobject.js","webpack:///./~/core-js/library/modules/_iobject.js","webpack:///./~/core-js/library/modules/_cof.js","webpack:///./~/core-js/library/modules/_defined.js","webpack:///./~/core-js/library/modules/_array-includes.js","webpack:///./~/core-js/library/modules/_to-length.js","webpack:///./~/core-js/library/modules/_to-integer.js","webpack:///./~/core-js/library/modules/_to-index.js","webpack:///./~/core-js/library/modules/_shared-key.js","webpack:///./~/core-js/library/modules/_shared.js","webpack:///./~/core-js/library/modules/_uid.js","webpack:///./~/core-js/library/modules/_enum-bug-keys.js","webpack:///./~/core-js/library/modules/_object-gops.js","webpack:///./~/core-js/library/modules/_object-pie.js","webpack:///./~/core-js/library/modules/_to-object.js","webpack:///./~/babel-runtime/helpers/classCallCheck.js","webpack:///./~/babel-runtime/helpers/createClass.js","webpack:///./~/babel-runtime/core-js/object/define-property.js","webpack:///./~/core-js/library/fn/object/define-property.js","webpack:///./~/core-js/library/modules/es6.object.define-property.js","webpack:///./~/is-promise/index.js","webpack:///./src/embed/ObjectConverter.js","webpack:///./src/embed/AttributeWatcher.js","webpack:///./~/mutation-summary/src/mutation-summary.js","webpack:///./~/uuid/v4.js","webpack:///./~/uuid/lib/rng-browser.js","webpack:///./~/uuid/lib/bytesToUuid.js","webpack:///./src/embed/AttributeConverters.js"],"names":["on","window","GrimoireJS","observeRoot","element","observer","MutationObserver","mutations","forEach","mutation","type","i","addedNodes","length","addedNode","post","parent","fromElement","parentElement","root","observe","attributes","childList","characterData","subtree","key","rootNodes","message","companion","get","result","response","m","rootNode","removeHandlers","node","nodeDictionary","components","_components","map","fromComponent","watch","nodeName","name","className","id","iframeObserver","callback","e","j","added","elem","queries","MessageManager","handlers","addEventListener","onRecieve","bind","data","$source","f","toContent","packet","$toContent","undefined","Error","postMessage","handler","then","actualResult","$callId","push","index","indexOf","splice","ObjectConverter","noRecursive","children","getAttribute","tagName","component","toArray","fromAttribute","attr","converter","declaration","attrInfo","value","Value","toString","AttributeWatcher","watching","cName","attrName","c","a","addHandler","onChanged","func","target","removeObserver","rawElements","isColor","isVector","eularAngles"],"mappings":"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,eAAc;AACd,eAAc;AACd,eAAc;AACd,gBAAe;AACf,gBAAe;AACf,gBAAe;AACf,iBAAgB;AAChB,0B;;;;;;AC5DA;AACA;AACA;AACA,wCAAuC,gC;;;;;;ACHvC,8BAA6B;AAC7B,sCAAqC,gC;;;;;;ACDrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACnBA;AACA;AACA;AACA,G;;;;;;ACHA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA,G;;;;;;ACPA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG,UAAU;AACb;AACA;AACA;AACA,G;;;;;;ACfA;AACA;AACA;AACA;AACA,G;;;;;;ACJA;AACA;AACA,G;;;;;;ACFA;AACA,sEAAsE,gBAAgB,UAAU,GAAG;AACnG,EAAC,E;;;;;;ACFD;AACA;AACA,kCAAiC,QAAQ,gBAAgB,UAAU,GAAG;AACtE,EAAC,E;;;;;;ACHD;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,G;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC,UAAU,EAAE;AAC9C,oBAAmB,sCAAsC;AACzD,EAAC,oCAAoC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,EAAC,W;;;;;;AChCD;AACA;AACA;;AAEA;AACA;AACA,G;;;;;;ACNA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;AChBA,wBAAuB;AACvB;AACA;AACA,G;;;;;;ACHA;A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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC,4BAA4B;AAC7B;AACA;AACA;AACA;AACA;AACA,oCAAmC,mBAAmB;AACtD,qCAAoC,oBAAoB;AACxD,wCAAuC,uBAAuB;AAC9D,wCAAuC,sBAAsB;AAC7D,gCAA+B,eAAe;AAC9C,6CAA4C,2BAA2B;AACvE,gDAA+C,8BAA8B;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA,oCAAmC,kCAAkC;AACrE;AACA;AACA;AACA,oCAAmC,gCAAgC;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,yBAAyB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAAyC,OAAO;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,yBAAyB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,0BAA0B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,wBAAwB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA,4BAA2B,8BAA8B;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,6BAA6B;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAsB;AACtB;AACA;AACA,wBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,2BAA2B;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,kCAAkC;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,gCAAgC;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,4BAA4B;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,4BAA4B;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,mBAAmB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,UAAS;AACT,mCAAkC;AAClC;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,4BAA4B;AACnD;AACA;AACA;AACA;AACA;AACA,oCAAmC,YAAY;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC,sBAAsB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,iCAAiC;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,oDAAmD,8CAA8C,EAAE;AACnG;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAsC;AACtC,kEAAiE;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;;;;;;;ACr3CA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,qBAAoB,SAAS;AAC7B;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;AC5BA;AACA;AACA;AACA;AACA;;AAEA,+CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAsB,QAAQ;AAC9B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;;AChCA;AACA;AACA;AACA;AACA;AACA,gBAAe,SAAS;AACxB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;mBCtBe,UAASP,IAAT,EAAc;AAC3B,aAAQA,KAAKC,SAAb;AACI,cAAK,QAAL;AACA,cAAK,QAAL;AACA,cAAK,SAAL;AACA,cAAK,SAAL;AACE;AACF,cAAK,QAAL;AACA,cAAK,QAAL;AACI,oBAAO;AACHzC,uBAAMwC,KAAKxC,IAAL,CAAUA,IADb;AAEH4C,wBAAOJ,KAAKK,KAAL,CAAWa,WAFf;AAGHC,0BAAS;AAHN,cAAP;AAKJ,cAAK,SAAL;AACA,cAAK,SAAL;AACA,cAAK,SAAL;AACI,oBAAO;AACH3D,uBAAMwC,KAAKxC,IAAL,CAAUA,IADb;AAEH4C,wBAAOJ,KAAKK,KAAL,CAAWa,WAFf;AAGHE,2BAAU,IAHP;AAIH1F,yBAAQ,CAAC,SAAD,EAAY,SAAZ,EAAuB,SAAvB,EAAkC4D,OAAlC,CAA0CW,SAA1C,IAAuD;AAJ5D,cAAP;AAMJ,cAAK,WAAL;AACI,oBAAO;AACHzC,uBAAMwC,KAAKxC,IAAL,CAAUA,IADb;AAEH4C,wBAAOJ,KAAKK,KAAL,CAAWgB,WAAX,CAAuBH,WAF3B;AAGHE,2BAAU,IAHP;AAIH1F,yBAAQ;AAJL,cAAP;AAMJ;AACI,oBAAO;AACH8B,uBAAMwC,KAAKxC,IAAL,CAAUA,IADb;AAEH4C,wBAAO,CAAC,CAACJ,KAAKK,KAAP,GAAe,wBAAf,GAA0C;AAF9C,cAAP;AA9BR;AAmCD,E","file":"./lib/embed.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 113c876654ac79245faf","import MessageManager from \"./MessageManager\";\nimport ObjectConverter from \"./ObjectConverter\";\nimport AttributeWatcher from \"./AttributeWatcher\";\nimport MutationSummary from \"mutation-summary\";\nimport UUID from \"uuid/v4\";\nMessageManager.on(\"sync-devtool\", function() {\n    if (!!window.GrimoireJS) {\n        function observeRoot(element) {\n            const observer = new MutationObserver((mutations) => {\n                mutations.forEach((mutation) => {\n                    if (mutation.type === \"childList\") {\n                        for (let i = 0; i < mutation.addedNodes.length; i++) {\n                            const addedNode = mutation.addedNodes[i];\n                            MessageManager.post({\n                                type: \"node-added\",\n                                parent: ObjectConverter.fromElement(addedNode.parentElement),\n                                addedNode: ObjectConverter.fromElement(addedNode),\n                                root: ObjectConverter.fromElement(element)\n                            })\n                        }\n                    }\n                });\n            });\n            observer.observe(element, {\n                attributes: true,\n                childList: true,\n                characterData: true,\n                subtree: true\n            });\n        }\n\n\n        for (let key in window.GrimoireJS.rootNodes) {\n            const root = window.GrimoireJS.rootNodes[key];\n            const message = ObjectConverter.fromElement(root.companion.get(\"scriptElement\"), true);\n            message.key = key;\n            MessageManager.post({\n                type: \"new-tree\",\n                result: message\n            });\n            //observeRoot(root.element);\n        }\n    }\n});\n\nMessageManager.response(\"fetch-tree\",(m)=>{\n  if(!window.GrimoireJS)return;\n  const rootNode = window.GrimoireJS.rootNodes[m.key];\n  if(rootNode === void 0)return;\n  return {\n    root:ObjectConverter.fromElement(rootNode.element)\n  }\n});\n\nMessageManager.response(\"fetch-node\", function(m) {\n    AttributeWatcher.removeHandlers();\n    if(!window.GrimoireJS)return;\n    const node = window.GrimoireJS.nodeDictionary[m.key];\n    if (!node) {\n        return;\n    }\n    const components = node._components.map(m => ObjectConverter.fromComponent(m));\n    AttributeWatcher.watch(node);\n    return {\n      node:{\n        nodeName: node.name.name,\n        className: node.element.className,\n        id: node.element.id,\n        components: components\n    }\n  };\n});\n\nif (!!window.GrimoireJS) {\n    MessageManager.post({\n        type: \"initialize\"\n    });\n}\nconst iframeObserver = new MutationSummary({\n    callback: (e) => {\n        for (let i = 0; i < e.length; i++) {\n            for (let j = 0; j < e[i].added.length; j++) {\n                const elem = e[i].added[j];\n                const id = UUID();\n                elem.className += \" \" + id;\n                MessageManager.post({\n                    type: \"add-iframe\",\n                    id: id\n                }, true)// send to content script\n            }\n        }\n    },\n    queries: [{\n        element: \"iframe\"\n    }]\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/embed/embed.js","import isPromise from \"is-promise\";\nclass MessageManager {\n    constructor() {\n      this.handlers = {};\n      window.addEventListener(\"message\",this.onRecieve.bind(this));\n    }\n\n    onRecieve(message){\n      if(message.data.$source !== \"grimoire-inspector-dev-tool\"){\n        return;\n      }\n      if(this.handlers[message.data.type]){\n        this.handlers[message.data.type].forEach(f=>f(message.data));\n      }\n    }\n\n    post(message,toContent) {\n        const packet = Object.assign({\n            $source: \"grimoire-inspector\",\n            $toContent: toContent? true:undefined\n        }, message);\n        if(packet.type === void 0){\n          throw new Error(\"Type must be specified\");\n        }\n        window.postMessage(packet, \"*\");\n    }\n\n    response(type,handler){\n      this.on(type,(message)=>{\n        const result = handler(message);\n        if(result === void 0){\n          return;// Only when the request is not on this frame\n        }\n        if(isPromise(result)){\n          result.then((actualResult)=>{\n            actualResult.$callId = message.$callId;\n            actualResult.type = type;\n            this.post(actualResult);\n          });\n        }else{\n          result.$callId = message.$callId;\n          result.type = type;\n           this.post(result);\n        }\n      });\n    }\n\n    on(type,handler){\n      if(this.handlers[type] === void 0){\n        this.handlers[type] = [];\n      }\n      this.handlers[type].push(handler);\n    }\n\n    off(type,handler){\n      if(this.handlers[type] === void 0){\n        return\n      }\n      const index = this.handlers[type].indexOf(handler);\n      if(index !== -1){\n        this.handlers[type].splice(index,1);\n      }\n    }\n}\n\nexport default new MessageManager();\n\n\n\n// WEBPACK FOOTER //\n// ./src/embed/MessageManager.js","module.exports = { \"default\": require(\"core-js/library/fn/object/assign\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/core-js/object/assign.js\n// module id = 2\n// module chunks = 0","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/_core').Object.assign;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/fn/object/assign.js\n// module id = 3\n// module chunks = 0","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', {assign: require('./_object-assign')});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/es6.object.assign.js\n// module id = 4\n// module chunks = 0","var global    = require('./_global')\n  , core      = require('./_core')\n  , ctx       = require('./_ctx')\n  , hide      = require('./_hide')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , expProto  = exports[PROTOTYPE]\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(a, b, c){\n        if(this instanceof C){\n          switch(arguments.length){\n            case 0: return new C;\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if(IS_PROTO){\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if(type & $export.R && expProto && !expProto[key])hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library` \nmodule.exports = $export;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_export.js\n// module id = 5\n// module chunks = 0","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_global.js\n// module id = 6\n// module chunks = 0","var core = module.exports = {version: '2.4.0'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_core.js\n// module id = 7\n// module chunks = 0","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_ctx.js\n// module id = 8\n// module chunks = 0","module.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_a-function.js\n// module id = 9\n// module chunks = 0","var dP         = require('./_object-dp')\n  , createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function(object, key, value){\n  return dP.f(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_hide.js\n// module id = 10\n// module chunks = 0","var anObject       = require('./_an-object')\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\n  , toPrimitive    = require('./_to-primitive')\n  , dP             = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes){\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if(IE8_DOM_DEFINE)try {\n    return dP(O, P, Attributes);\n  } catch(e){ /* empty */ }\n  if('get' in Attributes || 'set' in Attributes)throw TypeError('Accessors not supported!');\n  if('value' in Attributes)O[P] = Attributes.value;\n  return O;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_object-dp.js\n// module id = 11\n// module chunks = 0","var isObject = require('./_is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_an-object.js\n// module id = 12\n// module chunks = 0","module.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_is-object.js\n// module id = 13\n// module chunks = 0","module.exports = !require('./_descriptors') && !require('./_fails')(function(){\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', {get: function(){ return 7; }}).a != 7;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_ie8-dom-define.js\n// module id = 14\n// module chunks = 0","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_descriptors.js\n// module id = 15\n// module chunks = 0","module.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_fails.js\n// module id = 16\n// module chunks = 0","var isObject = require('./_is-object')\n  , document = require('./_global').document\n  // in old IE typeof document.createElement is 'object'\n  , is = isObject(document) && isObject(document.createElement);\nmodule.exports = function(it){\n  return is ? document.createElement(it) : {};\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_dom-create.js\n// module id = 17\n// module chunks = 0","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function(it, S){\n  if(!isObject(it))return it;\n  var fn, val;\n  if(S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_to-primitive.js\n// module id = 18\n// module chunks = 0","module.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_property-desc.js\n// module id = 19\n// module chunks = 0","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys  = require('./_object-keys')\n  , gOPS     = require('./_object-gops')\n  , pIE      = require('./_object-pie')\n  , toObject = require('./_to-object')\n  , IObject  = require('./_iobject')\n  , $assign  = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function(){\n  var A = {}\n    , B = {}\n    , S = Symbol()\n    , K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function(k){ B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source){ // eslint-disable-line no-unused-vars\n  var T     = toObject(target)\n    , aLen  = arguments.length\n    , index = 1\n    , getSymbols = gOPS.f\n    , isEnum     = pIE.f;\n  while(aLen > index){\n    var S      = IObject(arguments[index++])\n      , keys   = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S)\n      , length = keys.length\n      , j      = 0\n      , key;\n    while(length > j)if(isEnum.call(S, key = keys[j++]))T[key] = S[key];\n  } return T;\n} : $assign;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_object-assign.js\n// module id = 20\n// module chunks = 0","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys       = require('./_object-keys-internal')\n  , enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O){\n  return $keys(O, enumBugKeys);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_object-keys.js\n// module id = 21\n// module chunks = 0","var has          = require('./_has')\n  , toIObject    = require('./_to-iobject')\n  , arrayIndexOf = require('./_array-includes')(false)\n  , IE_PROTO     = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function(object, names){\n  var O      = toIObject(object)\n    , i      = 0\n    , result = []\n    , key;\n  for(key in O)if(key != IE_PROTO)has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while(names.length > i)if(has(O, key = names[i++])){\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_object-keys-internal.js\n// module id = 22\n// module chunks = 0","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_has.js\n// module id = 23\n// module chunks = 0","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject')\n  , defined = require('./_defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_to-iobject.js\n// module id = 24\n// module chunks = 0","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_iobject.js\n// module id = 25\n// module chunks = 0","var toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_cof.js\n// module id = 26\n// module chunks = 0","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_defined.js\n// module id = 27\n// module chunks = 0","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject')\n  , toLength  = require('./_to-length')\n  , toIndex   = require('./_to-index');\nmodule.exports = function(IS_INCLUDES){\n  return function($this, el, fromIndex){\n    var O      = toIObject($this)\n      , length = toLength(O.length)\n      , index  = toIndex(fromIndex, length)\n      , value;\n    // Array#includes uses SameValueZero equality algorithm\n    if(IS_INCLUDES && el != el)while(length > index){\n      value = O[index++];\n      if(value != value)return true;\n    // Array#toIndex ignores holes, Array#includes - not\n    } else for(;length > index; index++)if(IS_INCLUDES || index in O){\n      if(O[index] === el)return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_array-includes.js\n// module id = 28\n// module chunks = 0","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer')\n  , min       = Math.min;\nmodule.exports = function(it){\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_to-length.js\n// module id = 29\n// module chunks = 0","// 7.1.4 ToInteger\nvar ceil  = Math.ceil\n  , floor = Math.floor;\nmodule.exports = function(it){\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_to-integer.js\n// module id = 30\n// module chunks = 0","var toInteger = require('./_to-integer')\n  , max       = Math.max\n  , min       = Math.min;\nmodule.exports = function(index, length){\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_to-index.js\n// module id = 31\n// module chunks = 0","var shared = require('./_shared')('keys')\n  , uid    = require('./_uid');\nmodule.exports = function(key){\n  return shared[key] || (shared[key] = uid(key));\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_shared-key.js\n// module id = 32\n// module chunks = 0","var global = require('./_global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_shared.js\n// module id = 33\n// module chunks = 0","var id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_uid.js\n// module id = 34\n// module chunks = 0","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_enum-bug-keys.js\n// module id = 35\n// module chunks = 0","exports.f = Object.getOwnPropertySymbols;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_object-gops.js\n// module id = 36\n// module chunks = 0","exports.f = {}.propertyIsEnumerable;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_object-pie.js\n// module id = 37\n// module chunks = 0","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_to-object.js\n// module id = 38\n// module chunks = 0","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/helpers/classCallCheck.js\n// module id = 39\n// module chunks = 0","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/helpers/createClass.js\n// module id = 40\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/core-js/object/define-property.js\n// module id = 41\n// module chunks = 0","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc){\n  return $Object.defineProperty(it, key, desc);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/fn/object/define-property.js\n// module id = 42\n// module chunks = 0","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', {defineProperty: require('./_object-dp').f});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/es6.object.define-property.js\n// module id = 43\n// module chunks = 0","module.exports = isPromise;\n\nfunction isPromise(obj) {\n  return !!obj && (typeof obj === 'object' || typeof obj === 'function') && typeof obj.then === 'function';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/is-promise/index.js\n// module id = 44\n// module chunks = 0","import AttributeConverter from \"./AttributeConverters\";\nclass ObjectConverter {\n    fromElement(element, noRecursive) {\n        let children;\n        if (!noRecursive) {\n            children = [];\n            for (let i = 0; i < element.children.length; i++) {\n                children.push(this.fromElement(element.children[i]));\n            }\n        }\n        return {\n            key: element.getAttribute(\"x-gr-id\"),\n            className: element.className,\n            tagName: element.tagName,\n            id: element.id,\n            children: children\n        };\n    }\n\n    fromComponent(component) {\n        return {\n            name: component.name.name,\n            attributes: component.attributes.toArray().map(m => this.fromAttribute(m))\n        };\n    }\n\n    fromAttribute(attr) {\n      const converter = attr.declaration.converter;\n        try {\n            let attrInfo = {\n              converter:converter,\n              name:attr.name.name,\n              value:attr.Value\n            };\n            AttributeConverter(attrInfo);\n            return attrInfo;\n        } catch (e) {\n            return {\n                name: attr.name.name,\n                value: e.toString(),\n                converter:converter\n            };\n        }\n    }\n}\n\nexport default new ObjectConverter();\n\n\n\n// WEBPACK FOOTER //\n// ./src/embed/ObjectConverter.js","import MessageManager from \"./MessageManager\";\nimport ObjectConverter from \"./ObjectConverter\";\nclass AttributeWatcher {\n    constructor() {\n        this.watching = [];\n        this.components = {};\n        MessageManager.on(\"attribute-manual-change\", (m) => {\n          this.components[m.cName][m.attrName].Value = m.value;\n        });\n    }\n\n    watch(node) {\n        this.node = node;\n        node._components.forEach(c => {\n            this.components[c.name.name] = {};\n            c.attributes.toArray().forEach(a=>{\n              this.components[c.name.name][a.name.name] = a;\n            })\n        });\n        node._components.forEach(c => c.attributes.toArray().forEach(a => this.addHandler(a, this.onChanged.bind(this))));\n    }\n\n    onChanged() {\n        const components = this.node._components.map(m => ObjectConverter.fromComponent(m));\n        MessageManager.post({\n            type: \"attribute-update\",\n            components: components\n        });\n    }\n\n    addHandler(attr, func) {\n        this.watching.push({\n            attr: attr,\n            handler: func\n        });\n        attr.watch(func);\n    }\n\n    removeHandlers() {\n        for (let i = 0; i < this.watching.length; i++) {\n            const target = this.watching[i];\n            target.attr.removeObserver(target.handler);\n        }\n        this.watching.splice(0, this.watching.length);\n    }\n}\n\nexport default new AttributeWatcher();\n\n\n\n// WEBPACK FOOTER //\n// ./src/embed/AttributeWatcher.js","// Copyright 2011 Google Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar MutationObserverCtor;\nif (typeof WebKitMutationObserver !== 'undefined')\n    MutationObserverCtor = WebKitMutationObserver;\nelse\n    MutationObserverCtor = MutationObserver;\nif (MutationObserverCtor === undefined) {\n    console.error('DOM Mutation Observers are required.');\n    console.error('https://developer.mozilla.org/en-US/docs/DOM/MutationObserver');\n    throw Error('DOM Mutation Observers are required');\n}\nvar NodeMap = (function () {\n    function NodeMap() {\n        this.nodes = [];\n        this.values = [];\n    }\n    NodeMap.prototype.isIndex = function (s) {\n        return +s === s >>> 0;\n    };\n    NodeMap.prototype.nodeId = function (node) {\n        var id = node[NodeMap.ID_PROP];\n        if (!id)\n            id = node[NodeMap.ID_PROP] = NodeMap.nextId_++;\n        return id;\n    };\n    NodeMap.prototype.set = function (node, value) {\n        var id = this.nodeId(node);\n        this.nodes[id] = node;\n        this.values[id] = value;\n    };\n    NodeMap.prototype.get = function (node) {\n        var id = this.nodeId(node);\n        return this.values[id];\n    };\n    NodeMap.prototype.has = function (node) {\n        return this.nodeId(node) in this.nodes;\n    };\n    NodeMap.prototype.delete = function (node) {\n        var id = this.nodeId(node);\n        delete this.nodes[id];\n        this.values[id] = undefined;\n    };\n    NodeMap.prototype.keys = function () {\n        var nodes = [];\n        for (var id in this.nodes) {\n            if (!this.isIndex(id))\n                continue;\n            nodes.push(this.nodes[id]);\n        }\n        return nodes;\n    };\n    NodeMap.ID_PROP = '__mutation_summary_node_map_id__';\n    NodeMap.nextId_ = 1;\n    return NodeMap;\n})();\n/**\n *  var reachableMatchableProduct = [\n *  //  STAYED_OUT,  ENTERED,     STAYED_IN,   EXITED\n *    [ STAYED_OUT,  STAYED_OUT,  STAYED_OUT,  STAYED_OUT ], // STAYED_OUT\n *    [ STAYED_OUT,  ENTERED,     ENTERED,     STAYED_OUT ], // ENTERED\n *    [ STAYED_OUT,  ENTERED,     STAYED_IN,   EXITED     ], // STAYED_IN\n *    [ STAYED_OUT,  STAYED_OUT,  EXITED,      EXITED     ]  // EXITED\n *  ];\n */\nvar Movement;\n(function (Movement) {\n    Movement[Movement[\"STAYED_OUT\"] = 0] = \"STAYED_OUT\";\n    Movement[Movement[\"ENTERED\"] = 1] = \"ENTERED\";\n    Movement[Movement[\"STAYED_IN\"] = 2] = \"STAYED_IN\";\n    Movement[Movement[\"REPARENTED\"] = 3] = \"REPARENTED\";\n    Movement[Movement[\"REORDERED\"] = 4] = \"REORDERED\";\n    Movement[Movement[\"EXITED\"] = 5] = \"EXITED\";\n})(Movement || (Movement = {}));\nfunction enteredOrExited(changeType) {\n    return changeType === Movement.ENTERED || changeType === Movement.EXITED;\n}\nvar NodeChange = (function () {\n    function NodeChange(node, childList, attributes, characterData, oldParentNode, added, attributeOldValues, characterDataOldValue) {\n        if (childList === void 0) { childList = false; }\n        if (attributes === void 0) { attributes = false; }\n        if (characterData === void 0) { characterData = false; }\n        if (oldParentNode === void 0) { oldParentNode = null; }\n        if (added === void 0) { added = false; }\n        if (attributeOldValues === void 0) { attributeOldValues = null; }\n        if (characterDataOldValue === void 0) { characterDataOldValue = null; }\n        this.node = node;\n        this.childList = childList;\n        this.attributes = attributes;\n        this.characterData = characterData;\n        this.oldParentNode = oldParentNode;\n        this.added = added;\n        this.attributeOldValues = attributeOldValues;\n        this.characterDataOldValue = characterDataOldValue;\n        this.isCaseInsensitive =\n            this.node.nodeType === Node.ELEMENT_NODE &&\n                this.node instanceof HTMLElement &&\n                this.node.ownerDocument instanceof HTMLDocument;\n    }\n    NodeChange.prototype.getAttributeOldValue = function (name) {\n        if (!this.attributeOldValues)\n            return undefined;\n        if (this.isCaseInsensitive)\n            name = name.toLowerCase();\n        return this.attributeOldValues[name];\n    };\n    NodeChange.prototype.getAttributeNamesMutated = function () {\n        var names = [];\n        if (!this.attributeOldValues)\n            return names;\n        for (var name in this.attributeOldValues) {\n            names.push(name);\n        }\n        return names;\n    };\n    NodeChange.prototype.attributeMutated = function (name, oldValue) {\n        this.attributes = true;\n        this.attributeOldValues = this.attributeOldValues || {};\n        if (name in this.attributeOldValues)\n            return;\n        this.attributeOldValues[name] = oldValue;\n    };\n    NodeChange.prototype.characterDataMutated = function (oldValue) {\n        if (this.characterData)\n            return;\n        this.characterData = true;\n        this.characterDataOldValue = oldValue;\n    };\n    // Note: is it possible to receive a removal followed by a removal. This\n    // can occur if the removed node is added to an non-observed node, that\n    // node is added to the observed area, and then the node removed from\n    // it.\n    NodeChange.prototype.removedFromParent = function (parent) {\n        this.childList = true;\n        if (this.added || this.oldParentNode)\n            this.added = false;\n        else\n            this.oldParentNode = parent;\n    };\n    NodeChange.prototype.insertedIntoParent = function () {\n        this.childList = true;\n        this.added = true;\n    };\n    // An node's oldParent is\n    //   -its present parent, if its parentNode was not changed.\n    //   -null if the first thing that happened to it was an add.\n    //   -the node it was removed from if the first thing that happened to it\n    //      was a remove.\n    NodeChange.prototype.getOldParent = function () {\n        if (this.childList) {\n            if (this.oldParentNode)\n                return this.oldParentNode;\n            if (this.added)\n                return null;\n        }\n        return this.node.parentNode;\n    };\n    return NodeChange;\n})();\nvar ChildListChange = (function () {\n    function ChildListChange() {\n        this.added = new NodeMap();\n        this.removed = new NodeMap();\n        this.maybeMoved = new NodeMap();\n        this.oldPrevious = new NodeMap();\n        this.moved = undefined;\n    }\n    return ChildListChange;\n})();\nvar TreeChanges = (function (_super) {\n    __extends(TreeChanges, _super);\n    function TreeChanges(rootNode, mutations) {\n        _super.call(this);\n        this.rootNode = rootNode;\n        this.reachableCache = undefined;\n        this.wasReachableCache = undefined;\n        this.anyParentsChanged = false;\n        this.anyAttributesChanged = false;\n        this.anyCharacterDataChanged = false;\n        for (var m = 0; m < mutations.length; m++) {\n            var mutation = mutations[m];\n            switch (mutation.type) {\n                case 'childList':\n                    this.anyParentsChanged = true;\n                    for (var i = 0; i < mutation.removedNodes.length; i++) {\n                        var node = mutation.removedNodes[i];\n                        this.getChange(node).removedFromParent(mutation.target);\n                    }\n                    for (var i = 0; i < mutation.addedNodes.length; i++) {\n                        var node = mutation.addedNodes[i];\n                        this.getChange(node).insertedIntoParent();\n                    }\n                    break;\n                case 'attributes':\n                    this.anyAttributesChanged = true;\n                    var change = this.getChange(mutation.target);\n                    change.attributeMutated(mutation.attributeName, mutation.oldValue);\n                    break;\n                case 'characterData':\n                    this.anyCharacterDataChanged = true;\n                    var change = this.getChange(mutation.target);\n                    change.characterDataMutated(mutation.oldValue);\n                    break;\n            }\n        }\n    }\n    TreeChanges.prototype.getChange = function (node) {\n        var change = this.get(node);\n        if (!change) {\n            change = new NodeChange(node);\n            this.set(node, change);\n        }\n        return change;\n    };\n    TreeChanges.prototype.getOldParent = function (node) {\n        var change = this.get(node);\n        return change ? change.getOldParent() : node.parentNode;\n    };\n    TreeChanges.prototype.getIsReachable = function (node) {\n        if (node === this.rootNode)\n            return true;\n        if (!node)\n            return false;\n        this.reachableCache = this.reachableCache || new NodeMap();\n        var isReachable = this.reachableCache.get(node);\n        if (isReachable === undefined) {\n            isReachable = this.getIsReachable(node.parentNode);\n            this.reachableCache.set(node, isReachable);\n        }\n        return isReachable;\n    };\n    // A node wasReachable if its oldParent wasReachable.\n    TreeChanges.prototype.getWasReachable = function (node) {\n        if (node === this.rootNode)\n            return true;\n        if (!node)\n            return false;\n        this.wasReachableCache = this.wasReachableCache || new NodeMap();\n        var wasReachable = this.wasReachableCache.get(node);\n        if (wasReachable === undefined) {\n            wasReachable = this.getWasReachable(this.getOldParent(node));\n            this.wasReachableCache.set(node, wasReachable);\n        }\n        return wasReachable;\n    };\n    TreeChanges.prototype.reachabilityChange = function (node) {\n        if (this.getIsReachable(node)) {\n            return this.getWasReachable(node) ?\n                Movement.STAYED_IN : Movement.ENTERED;\n        }\n        return this.getWasReachable(node) ?\n            Movement.EXITED : Movement.STAYED_OUT;\n    };\n    return TreeChanges;\n})(NodeMap);\nvar MutationProjection = (function () {\n    // TOOD(any)\n    function MutationProjection(rootNode, mutations, selectors, calcReordered, calcOldPreviousSibling) {\n        this.rootNode = rootNode;\n        this.mutations = mutations;\n        this.selectors = selectors;\n        this.calcReordered = calcReordered;\n        this.calcOldPreviousSibling = calcOldPreviousSibling;\n        this.treeChanges = new TreeChanges(rootNode, mutations);\n        this.entered = [];\n        this.exited = [];\n        this.stayedIn = new NodeMap();\n        this.visited = new NodeMap();\n        this.childListChangeMap = undefined;\n        this.characterDataOnly = undefined;\n        this.matchCache = undefined;\n        this.processMutations();\n    }\n    MutationProjection.prototype.processMutations = function () {\n        if (!this.treeChanges.anyParentsChanged &&\n            !this.treeChanges.anyAttributesChanged)\n            return;\n        var changedNodes = this.treeChanges.keys();\n        for (var i = 0; i < changedNodes.length; i++) {\n            this.visitNode(changedNodes[i], undefined);\n        }\n    };\n    MutationProjection.prototype.visitNode = function (node, parentReachable) {\n        if (this.visited.has(node))\n            return;\n        this.visited.set(node, true);\n        var change = this.treeChanges.get(node);\n        var reachable = parentReachable;\n        // node inherits its parent's reachability change unless\n        // its parentNode was mutated.\n        if ((change && change.childList) || reachable == undefined)\n            reachable = this.treeChanges.reachabilityChange(node);\n        if (reachable === Movement.STAYED_OUT)\n            return;\n        // Cache match results for sub-patterns.\n        this.matchabilityChange(node);\n        if (reachable === Movement.ENTERED) {\n            this.entered.push(node);\n        }\n        else if (reachable === Movement.EXITED) {\n            this.exited.push(node);\n            this.ensureHasOldPreviousSiblingIfNeeded(node);\n        }\n        else if (reachable === Movement.STAYED_IN) {\n            var movement = Movement.STAYED_IN;\n            if (change && change.childList) {\n                if (change.oldParentNode !== node.parentNode) {\n                    movement = Movement.REPARENTED;\n                    this.ensureHasOldPreviousSiblingIfNeeded(node);\n                }\n                else if (this.calcReordered && this.wasReordered(node)) {\n                    movement = Movement.REORDERED;\n                }\n            }\n            this.stayedIn.set(node, movement);\n        }\n        if (reachable === Movement.STAYED_IN)\n            return;\n        // reachable === ENTERED || reachable === EXITED.\n        for (var child = node.firstChild; child; child = child.nextSibling) {\n            this.visitNode(child, reachable);\n        }\n    };\n    MutationProjection.prototype.ensureHasOldPreviousSiblingIfNeeded = function (node) {\n        if (!this.calcOldPreviousSibling)\n            return;\n        this.processChildlistChanges();\n        var parentNode = node.parentNode;\n        var nodeChange = this.treeChanges.get(node);\n        if (nodeChange && nodeChange.oldParentNode)\n            parentNode = nodeChange.oldParentNode;\n        var change = this.childListChangeMap.get(parentNode);\n        if (!change) {\n            change = new ChildListChange();\n            this.childListChangeMap.set(parentNode, change);\n        }\n        if (!change.oldPrevious.has(node)) {\n            change.oldPrevious.set(node, node.previousSibling);\n        }\n    };\n    MutationProjection.prototype.getChanged = function (summary, selectors, characterDataOnly) {\n        this.selectors = selectors;\n        this.characterDataOnly = characterDataOnly;\n        for (var i = 0; i < this.entered.length; i++) {\n            var node = this.entered[i];\n            var matchable = this.matchabilityChange(node);\n            if (matchable === Movement.ENTERED || matchable === Movement.STAYED_IN)\n                summary.added.push(node);\n        }\n        var stayedInNodes = this.stayedIn.keys();\n        for (var i = 0; i < stayedInNodes.length; i++) {\n            var node = stayedInNodes[i];\n            var matchable = this.matchabilityChange(node);\n            if (matchable === Movement.ENTERED) {\n                summary.added.push(node);\n            }\n            else if (matchable === Movement.EXITED) {\n                summary.removed.push(node);\n            }\n            else if (matchable === Movement.STAYED_IN && (summary.reparented || summary.reordered)) {\n                var movement = this.stayedIn.get(node);\n                if (summary.reparented && movement === Movement.REPARENTED)\n                    summary.reparented.push(node);\n                else if (summary.reordered && movement === Movement.REORDERED)\n                    summary.reordered.push(node);\n            }\n        }\n        for (var i = 0; i < this.exited.length; i++) {\n            var node = this.exited[i];\n            var matchable = this.matchabilityChange(node);\n            if (matchable === Movement.EXITED || matchable === Movement.STAYED_IN)\n                summary.removed.push(node);\n        }\n    };\n    MutationProjection.prototype.getOldParentNode = function (node) {\n        var change = this.treeChanges.get(node);\n        if (change && change.childList)\n            return change.oldParentNode ? change.oldParentNode : null;\n        var reachabilityChange = this.treeChanges.reachabilityChange(node);\n        if (reachabilityChange === Movement.STAYED_OUT || reachabilityChange === Movement.ENTERED)\n            throw Error('getOldParentNode requested on invalid node.');\n        return node.parentNode;\n    };\n    MutationProjection.prototype.getOldPreviousSibling = function (node) {\n        var parentNode = node.parentNode;\n        var nodeChange = this.treeChanges.get(node);\n        if (nodeChange && nodeChange.oldParentNode)\n            parentNode = nodeChange.oldParentNode;\n        var change = this.childListChangeMap.get(parentNode);\n        if (!change)\n            throw Error('getOldPreviousSibling requested on invalid node.');\n        return change.oldPrevious.get(node);\n    };\n    MutationProjection.prototype.getOldAttribute = function (element, attrName) {\n        var change = this.treeChanges.get(element);\n        if (!change || !change.attributes)\n            throw Error('getOldAttribute requested on invalid node.');\n        var value = change.getAttributeOldValue(attrName);\n        if (value === undefined)\n            throw Error('getOldAttribute requested for unchanged attribute name.');\n        return value;\n    };\n    MutationProjection.prototype.attributeChangedNodes = function (includeAttributes) {\n        if (!this.treeChanges.anyAttributesChanged)\n            return {}; // No attributes mutations occurred.\n        var attributeFilter;\n        var caseInsensitiveFilter;\n        if (includeAttributes) {\n            attributeFilter = {};\n            caseInsensitiveFilter = {};\n            for (var i = 0; i < includeAttributes.length; i++) {\n                var attrName = includeAttributes[i];\n                attributeFilter[attrName] = true;\n                caseInsensitiveFilter[attrName.toLowerCase()] = attrName;\n            }\n        }\n        var result = {};\n        var nodes = this.treeChanges.keys();\n        for (var i = 0; i < nodes.length; i++) {\n            var node = nodes[i];\n            var change = this.treeChanges.get(node);\n            if (!change.attributes)\n                continue;\n            if (Movement.STAYED_IN !== this.treeChanges.reachabilityChange(node) ||\n                Movement.STAYED_IN !== this.matchabilityChange(node)) {\n                continue;\n            }\n            var element = node;\n            var changedAttrNames = change.getAttributeNamesMutated();\n            for (var j = 0; j < changedAttrNames.length; j++) {\n                var attrName = changedAttrNames[j];\n                if (attributeFilter &&\n                    !attributeFilter[attrName] &&\n                    !(change.isCaseInsensitive && caseInsensitiveFilter[attrName])) {\n                    continue;\n                }\n                var oldValue = change.getAttributeOldValue(attrName);\n                if (oldValue === element.getAttribute(attrName))\n                    continue;\n                if (caseInsensitiveFilter && change.isCaseInsensitive)\n                    attrName = caseInsensitiveFilter[attrName];\n                result[attrName] = result[attrName] || [];\n                result[attrName].push(element);\n            }\n        }\n        return result;\n    };\n    MutationProjection.prototype.getOldCharacterData = function (node) {\n        var change = this.treeChanges.get(node);\n        if (!change || !change.characterData)\n            throw Error('getOldCharacterData requested on invalid node.');\n        return change.characterDataOldValue;\n    };\n    MutationProjection.prototype.getCharacterDataChanged = function () {\n        if (!this.treeChanges.anyCharacterDataChanged)\n            return []; // No characterData mutations occurred.\n        var nodes = this.treeChanges.keys();\n        var result = [];\n        for (var i = 0; i < nodes.length; i++) {\n            var target = nodes[i];\n            if (Movement.STAYED_IN !== this.treeChanges.reachabilityChange(target))\n                continue;\n            var change = this.treeChanges.get(target);\n            if (!change.characterData ||\n                target.textContent == change.characterDataOldValue)\n                continue;\n            result.push(target);\n        }\n        return result;\n    };\n    MutationProjection.prototype.computeMatchabilityChange = function (selector, el) {\n        if (!this.matchCache)\n            this.matchCache = [];\n        if (!this.matchCache[selector.uid])\n            this.matchCache[selector.uid] = new NodeMap();\n        var cache = this.matchCache[selector.uid];\n        var result = cache.get(el);\n        if (result === undefined) {\n            result = selector.matchabilityChange(el, this.treeChanges.get(el));\n            cache.set(el, result);\n        }\n        return result;\n    };\n    MutationProjection.prototype.matchabilityChange = function (node) {\n        var _this = this;\n        // TODO(rafaelw): Include PI, CDATA?\n        // Only include text nodes.\n        if (this.characterDataOnly) {\n            switch (node.nodeType) {\n                case Node.COMMENT_NODE:\n                case Node.TEXT_NODE:\n                    return Movement.STAYED_IN;\n                default:\n                    return Movement.STAYED_OUT;\n            }\n        }\n        // No element filter. Include all nodes.\n        if (!this.selectors)\n            return Movement.STAYED_IN;\n        // Element filter. Exclude non-elements.\n        if (node.nodeType !== Node.ELEMENT_NODE)\n            return Movement.STAYED_OUT;\n        var el = node;\n        var matchChanges = this.selectors.map(function (selector) {\n            return _this.computeMatchabilityChange(selector, el);\n        });\n        var accum = Movement.STAYED_OUT;\n        var i = 0;\n        while (accum !== Movement.STAYED_IN && i < matchChanges.length) {\n            switch (matchChanges[i]) {\n                case Movement.STAYED_IN:\n                    accum = Movement.STAYED_IN;\n                    break;\n                case Movement.ENTERED:\n                    if (accum === Movement.EXITED)\n                        accum = Movement.STAYED_IN;\n                    else\n                        accum = Movement.ENTERED;\n                    break;\n                case Movement.EXITED:\n                    if (accum === Movement.ENTERED)\n                        accum = Movement.STAYED_IN;\n                    else\n                        accum = Movement.EXITED;\n                    break;\n            }\n            i++;\n        }\n        return accum;\n    };\n    MutationProjection.prototype.getChildlistChange = function (el) {\n        var change = this.childListChangeMap.get(el);\n        if (!change) {\n            change = new ChildListChange();\n            this.childListChangeMap.set(el, change);\n        }\n        return change;\n    };\n    MutationProjection.prototype.processChildlistChanges = function () {\n        if (this.childListChangeMap)\n            return;\n        this.childListChangeMap = new NodeMap();\n        for (var i = 0; i < this.mutations.length; i++) {\n            var mutation = this.mutations[i];\n            if (mutation.type != 'childList')\n                continue;\n            if (this.treeChanges.reachabilityChange(mutation.target) !== Movement.STAYED_IN &&\n                !this.calcOldPreviousSibling)\n                continue;\n            var change = this.getChildlistChange(mutation.target);\n            var oldPrevious = mutation.previousSibling;\n            function recordOldPrevious(node, previous) {\n                if (!node ||\n                    change.oldPrevious.has(node) ||\n                    change.added.has(node) ||\n                    change.maybeMoved.has(node))\n                    return;\n                if (previous &&\n                    (change.added.has(previous) ||\n                        change.maybeMoved.has(previous)))\n                    return;\n                change.oldPrevious.set(node, previous);\n            }\n            for (var j = 0; j < mutation.removedNodes.length; j++) {\n                var node = mutation.removedNodes[j];\n                recordOldPrevious(node, oldPrevious);\n                if (change.added.has(node)) {\n                    change.added.delete(node);\n                }\n                else {\n                    change.removed.set(node, true);\n                    change.maybeMoved.delete(node);\n                }\n                oldPrevious = node;\n            }\n            recordOldPrevious(mutation.nextSibling, oldPrevious);\n            for (var j = 0; j < mutation.addedNodes.length; j++) {\n                var node = mutation.addedNodes[j];\n                if (change.removed.has(node)) {\n                    change.removed.delete(node);\n                    change.maybeMoved.set(node, true);\n                }\n                else {\n                    change.added.set(node, true);\n                }\n            }\n        }\n    };\n    MutationProjection.prototype.wasReordered = function (node) {\n        if (!this.treeChanges.anyParentsChanged)\n            return false;\n        this.processChildlistChanges();\n        var parentNode = node.parentNode;\n        var nodeChange = this.treeChanges.get(node);\n        if (nodeChange && nodeChange.oldParentNode)\n            parentNode = nodeChange.oldParentNode;\n        var change = this.childListChangeMap.get(parentNode);\n        if (!change)\n            return false;\n        if (change.moved)\n            return change.moved.get(node);\n        change.moved = new NodeMap();\n        var pendingMoveDecision = new NodeMap();\n        function isMoved(node) {\n            if (!node)\n                return false;\n            if (!change.maybeMoved.has(node))\n                return false;\n            var didMove = change.moved.get(node);\n            if (didMove !== undefined)\n                return didMove;\n            if (pendingMoveDecision.has(node)) {\n                didMove = true;\n            }\n            else {\n                pendingMoveDecision.set(node, true);\n                didMove = getPrevious(node) !== getOldPrevious(node);\n            }\n            if (pendingMoveDecision.has(node)) {\n                pendingMoveDecision.delete(node);\n                change.moved.set(node, didMove);\n            }\n            else {\n                didMove = change.moved.get(node);\n            }\n            return didMove;\n        }\n        var oldPreviousCache = new NodeMap();\n        function getOldPrevious(node) {\n            var oldPrevious = oldPreviousCache.get(node);\n            if (oldPrevious !== undefined)\n                return oldPrevious;\n            oldPrevious = change.oldPrevious.get(node);\n            while (oldPrevious &&\n                (change.removed.has(oldPrevious) || isMoved(oldPrevious))) {\n                oldPrevious = getOldPrevious(oldPrevious);\n            }\n            if (oldPrevious === undefined)\n                oldPrevious = node.previousSibling;\n            oldPreviousCache.set(node, oldPrevious);\n            return oldPrevious;\n        }\n        var previousCache = new NodeMap();\n        function getPrevious(node) {\n            if (previousCache.has(node))\n                return previousCache.get(node);\n            var previous = node.previousSibling;\n            while (previous && (change.added.has(previous) || isMoved(previous)))\n                previous = previous.previousSibling;\n            previousCache.set(node, previous);\n            return previous;\n        }\n        change.maybeMoved.keys().forEach(isMoved);\n        return change.moved.get(node);\n    };\n    return MutationProjection;\n})();\nvar Summary = (function () {\n    function Summary(projection, query) {\n        var _this = this;\n        this.projection = projection;\n        this.added = [];\n        this.removed = [];\n        this.reparented = query.all || query.element || query.characterData ? [] : undefined;\n        this.reordered = query.all ? [] : undefined;\n        projection.getChanged(this, query.elementFilter, query.characterData);\n        if (query.all || query.attribute || query.attributeList) {\n            var filter = query.attribute ? [query.attribute] : query.attributeList;\n            var attributeChanged = projection.attributeChangedNodes(filter);\n            if (query.attribute) {\n                this.valueChanged = attributeChanged[query.attribute] || [];\n            }\n            else {\n                this.attributeChanged = attributeChanged;\n                if (query.attributeList) {\n                    query.attributeList.forEach(function (attrName) {\n                        if (!_this.attributeChanged.hasOwnProperty(attrName))\n                            _this.attributeChanged[attrName] = [];\n                    });\n                }\n            }\n        }\n        if (query.all || query.characterData) {\n            var characterDataChanged = projection.getCharacterDataChanged();\n            if (query.characterData)\n                this.valueChanged = characterDataChanged;\n            else\n                this.characterDataChanged = characterDataChanged;\n        }\n        if (this.reordered)\n            this.getOldPreviousSibling = projection.getOldPreviousSibling.bind(projection);\n    }\n    Summary.prototype.getOldParentNode = function (node) {\n        return this.projection.getOldParentNode(node);\n    };\n    Summary.prototype.getOldAttribute = function (node, name) {\n        return this.projection.getOldAttribute(node, name);\n    };\n    Summary.prototype.getOldCharacterData = function (node) {\n        return this.projection.getOldCharacterData(node);\n    };\n    Summary.prototype.getOldPreviousSibling = function (node) {\n        return this.projection.getOldPreviousSibling(node);\n    };\n    return Summary;\n})();\n// TODO(rafaelw): Allow ':' and '.' as valid name characters.\nvar validNameInitialChar = /[a-zA-Z_]+/;\nvar validNameNonInitialChar = /[a-zA-Z0-9_\\-]+/;\n// TODO(rafaelw): Consider allowing backslash in the attrValue.\n// TODO(rafaelw): There's got a to be way to represent this state machine\n// more compactly???\nfunction escapeQuotes(value) {\n    return '\"' + value.replace(/\"/, '\\\\\\\"') + '\"';\n}\nvar Qualifier = (function () {\n    function Qualifier() {\n    }\n    Qualifier.prototype.matches = function (oldValue) {\n        if (oldValue === null)\n            return false;\n        if (this.attrValue === undefined)\n            return true;\n        if (!this.contains)\n            return this.attrValue == oldValue;\n        var tokens = oldValue.split(' ');\n        for (var i = 0; i < tokens.length; i++) {\n            if (this.attrValue === tokens[i])\n                return true;\n        }\n        return false;\n    };\n    Qualifier.prototype.toString = function () {\n        if (this.attrName === 'class' && this.contains)\n            return '.' + this.attrValue;\n        if (this.attrName === 'id' && !this.contains)\n            return '#' + this.attrValue;\n        if (this.contains)\n            return '[' + this.attrName + '~=' + escapeQuotes(this.attrValue) + ']';\n        if ('attrValue' in this)\n            return '[' + this.attrName + '=' + escapeQuotes(this.attrValue) + ']';\n        return '[' + this.attrName + ']';\n    };\n    return Qualifier;\n})();\nvar Selector = (function () {\n    function Selector() {\n        this.uid = Selector.nextUid++;\n        this.qualifiers = [];\n    }\n    Object.defineProperty(Selector.prototype, \"caseInsensitiveTagName\", {\n        get: function () {\n            return this.tagName.toUpperCase();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Selector.prototype, \"selectorString\", {\n        get: function () {\n            return this.tagName + this.qualifiers.join('');\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Selector.prototype.isMatching = function (el) {\n        return el[Selector.matchesSelector](this.selectorString);\n    };\n    Selector.prototype.wasMatching = function (el, change, isMatching) {\n        if (!change || !change.attributes)\n            return isMatching;\n        var tagName = change.isCaseInsensitive ? this.caseInsensitiveTagName : this.tagName;\n        if (tagName !== '*' && tagName !== el.tagName)\n            return false;\n        var attributeOldValues = [];\n        var anyChanged = false;\n        for (var i = 0; i < this.qualifiers.length; i++) {\n            var qualifier = this.qualifiers[i];\n            var oldValue = change.getAttributeOldValue(qualifier.attrName);\n            attributeOldValues.push(oldValue);\n            anyChanged = anyChanged || (oldValue !== undefined);\n        }\n        if (!anyChanged)\n            return isMatching;\n        for (var i = 0; i < this.qualifiers.length; i++) {\n            var qualifier = this.qualifiers[i];\n            var oldValue = attributeOldValues[i];\n            if (oldValue === undefined)\n                oldValue = el.getAttribute(qualifier.attrName);\n            if (!qualifier.matches(oldValue))\n                return false;\n        }\n        return true;\n    };\n    Selector.prototype.matchabilityChange = function (el, change) {\n        var isMatching = this.isMatching(el);\n        if (isMatching)\n            return this.wasMatching(el, change, isMatching) ? Movement.STAYED_IN : Movement.ENTERED;\n        else\n            return this.wasMatching(el, change, isMatching) ? Movement.EXITED : Movement.STAYED_OUT;\n    };\n    Selector.parseSelectors = function (input) {\n        var selectors = [];\n        var currentSelector;\n        var currentQualifier;\n        function newSelector() {\n            if (currentSelector) {\n                if (currentQualifier) {\n                    currentSelector.qualifiers.push(currentQualifier);\n                    currentQualifier = undefined;\n                }\n                selectors.push(currentSelector);\n            }\n            currentSelector = new Selector();\n        }\n        function newQualifier() {\n            if (currentQualifier)\n                currentSelector.qualifiers.push(currentQualifier);\n            currentQualifier = new Qualifier();\n        }\n        var WHITESPACE = /\\s/;\n        var valueQuoteChar;\n        var SYNTAX_ERROR = 'Invalid or unsupported selector syntax.';\n        var SELECTOR = 1;\n        var TAG_NAME = 2;\n        var QUALIFIER = 3;\n        var QUALIFIER_NAME_FIRST_CHAR = 4;\n        var QUALIFIER_NAME = 5;\n        var ATTR_NAME_FIRST_CHAR = 6;\n        var ATTR_NAME = 7;\n        var EQUIV_OR_ATTR_QUAL_END = 8;\n        var EQUAL = 9;\n        var ATTR_QUAL_END = 10;\n        var VALUE_FIRST_CHAR = 11;\n        var VALUE = 12;\n        var QUOTED_VALUE = 13;\n        var SELECTOR_SEPARATOR = 14;\n        var state = SELECTOR;\n        var i = 0;\n        while (i < input.length) {\n            var c = input[i++];\n            switch (state) {\n                case SELECTOR:\n                    if (c.match(validNameInitialChar)) {\n                        newSelector();\n                        currentSelector.tagName = c;\n                        state = TAG_NAME;\n                        break;\n                    }\n                    if (c == '*') {\n                        newSelector();\n                        currentSelector.tagName = '*';\n                        state = QUALIFIER;\n                        break;\n                    }\n                    if (c == '.') {\n                        newSelector();\n                        newQualifier();\n                        currentSelector.tagName = '*';\n                        currentQualifier.attrName = 'class';\n                        currentQualifier.contains = true;\n                        state = QUALIFIER_NAME_FIRST_CHAR;\n                        break;\n                    }\n                    if (c == '#') {\n                        newSelector();\n                        newQualifier();\n                        currentSelector.tagName = '*';\n                        currentQualifier.attrName = 'id';\n                        state = QUALIFIER_NAME_FIRST_CHAR;\n                        break;\n                    }\n                    if (c == '[') {\n                        newSelector();\n                        newQualifier();\n                        currentSelector.tagName = '*';\n                        currentQualifier.attrName = '';\n                        state = ATTR_NAME_FIRST_CHAR;\n                        break;\n                    }\n                    if (c.match(WHITESPACE))\n                        break;\n                    throw Error(SYNTAX_ERROR);\n                case TAG_NAME:\n                    if (c.match(validNameNonInitialChar)) {\n                        currentSelector.tagName += c;\n                        break;\n                    }\n                    if (c == '.') {\n                        newQualifier();\n                        currentQualifier.attrName = 'class';\n                        currentQualifier.contains = true;\n                        state = QUALIFIER_NAME_FIRST_CHAR;\n                        break;\n                    }\n                    if (c == '#') {\n                        newQualifier();\n                        currentQualifier.attrName = 'id';\n                        state = QUALIFIER_NAME_FIRST_CHAR;\n                        break;\n                    }\n                    if (c == '[') {\n                        newQualifier();\n                        currentQualifier.attrName = '';\n                        state = ATTR_NAME_FIRST_CHAR;\n                        break;\n                    }\n                    if (c.match(WHITESPACE)) {\n                        state = SELECTOR_SEPARATOR;\n                        break;\n                    }\n                    if (c == ',') {\n                        state = SELECTOR;\n                        break;\n                    }\n                    throw Error(SYNTAX_ERROR);\n                case QUALIFIER:\n                    if (c == '.') {\n                        newQualifier();\n                        currentQualifier.attrName = 'class';\n                        currentQualifier.contains = true;\n                        state = QUALIFIER_NAME_FIRST_CHAR;\n                        break;\n                    }\n                    if (c == '#') {\n                        newQualifier();\n                        currentQualifier.attrName = 'id';\n                        state = QUALIFIER_NAME_FIRST_CHAR;\n                        break;\n                    }\n                    if (c == '[') {\n                        newQualifier();\n                        currentQualifier.attrName = '';\n                        state = ATTR_NAME_FIRST_CHAR;\n                        break;\n                    }\n                    if (c.match(WHITESPACE)) {\n                        state = SELECTOR_SEPARATOR;\n                        break;\n                    }\n                    if (c == ',') {\n                        state = SELECTOR;\n                        break;\n                    }\n                    throw Error(SYNTAX_ERROR);\n                case QUALIFIER_NAME_FIRST_CHAR:\n                    if (c.match(validNameInitialChar)) {\n                        currentQualifier.attrValue = c;\n                        state = QUALIFIER_NAME;\n                        break;\n                    }\n                    throw Error(SYNTAX_ERROR);\n                case QUALIFIER_NAME:\n                    if (c.match(validNameNonInitialChar)) {\n                        currentQualifier.attrValue += c;\n                        break;\n                    }\n                    if (c == '.') {\n                        newQualifier();\n                        currentQualifier.attrName = 'class';\n                        currentQualifier.contains = true;\n                        state = QUALIFIER_NAME_FIRST_CHAR;\n                        break;\n                    }\n                    if (c == '#') {\n                        newQualifier();\n                        currentQualifier.attrName = 'id';\n                        state = QUALIFIER_NAME_FIRST_CHAR;\n                        break;\n                    }\n                    if (c == '[') {\n                        newQualifier();\n                        state = ATTR_NAME_FIRST_CHAR;\n                        break;\n                    }\n                    if (c.match(WHITESPACE)) {\n                        state = SELECTOR_SEPARATOR;\n                        break;\n                    }\n                    if (c == ',') {\n                        state = SELECTOR;\n                        break;\n                    }\n                    throw Error(SYNTAX_ERROR);\n                case ATTR_NAME_FIRST_CHAR:\n                    if (c.match(validNameInitialChar)) {\n                        currentQualifier.attrName = c;\n                        state = ATTR_NAME;\n                        break;\n                    }\n                    if (c.match(WHITESPACE))\n                        break;\n                    throw Error(SYNTAX_ERROR);\n                case ATTR_NAME:\n                    if (c.match(validNameNonInitialChar)) {\n                        currentQualifier.attrName += c;\n                        break;\n                    }\n                    if (c.match(WHITESPACE)) {\n                        state = EQUIV_OR_ATTR_QUAL_END;\n                        break;\n                    }\n                    if (c == '~') {\n                        currentQualifier.contains = true;\n                        state = EQUAL;\n                        break;\n                    }\n                    if (c == '=') {\n                        currentQualifier.attrValue = '';\n                        state = VALUE_FIRST_CHAR;\n                        break;\n                    }\n                    if (c == ']') {\n                        state = QUALIFIER;\n                        break;\n                    }\n                    throw Error(SYNTAX_ERROR);\n                case EQUIV_OR_ATTR_QUAL_END:\n                    if (c == '~') {\n                        currentQualifier.contains = true;\n                        state = EQUAL;\n                        break;\n                    }\n                    if (c == '=') {\n                        currentQualifier.attrValue = '';\n                        state = VALUE_FIRST_CHAR;\n                        break;\n                    }\n                    if (c == ']') {\n                        state = QUALIFIER;\n                        break;\n                    }\n                    if (c.match(WHITESPACE))\n                        break;\n                    throw Error(SYNTAX_ERROR);\n                case EQUAL:\n                    if (c == '=') {\n                        currentQualifier.attrValue = '';\n                        state = VALUE_FIRST_CHAR;\n                        break;\n                    }\n                    throw Error(SYNTAX_ERROR);\n                case ATTR_QUAL_END:\n                    if (c == ']') {\n                        state = QUALIFIER;\n                        break;\n                    }\n                    if (c.match(WHITESPACE))\n                        break;\n                    throw Error(SYNTAX_ERROR);\n                case VALUE_FIRST_CHAR:\n                    if (c.match(WHITESPACE))\n                        break;\n                    if (c == '\"' || c == \"'\") {\n                        valueQuoteChar = c;\n                        state = QUOTED_VALUE;\n                        break;\n                    }\n                    currentQualifier.attrValue += c;\n                    state = VALUE;\n                    break;\n                case VALUE:\n                    if (c.match(WHITESPACE)) {\n                        state = ATTR_QUAL_END;\n                        break;\n                    }\n                    if (c == ']') {\n                        state = QUALIFIER;\n                        break;\n                    }\n                    if (c == \"'\" || c == '\"')\n                        throw Error(SYNTAX_ERROR);\n                    currentQualifier.attrValue += c;\n                    break;\n                case QUOTED_VALUE:\n                    if (c == valueQuoteChar) {\n                        state = ATTR_QUAL_END;\n                        break;\n                    }\n                    currentQualifier.attrValue += c;\n                    break;\n                case SELECTOR_SEPARATOR:\n                    if (c.match(WHITESPACE))\n                        break;\n                    if (c == ',') {\n                        state = SELECTOR;\n                        break;\n                    }\n                    throw Error(SYNTAX_ERROR);\n            }\n        }\n        switch (state) {\n            case SELECTOR:\n            case TAG_NAME:\n            case QUALIFIER:\n            case QUALIFIER_NAME:\n            case SELECTOR_SEPARATOR:\n                // Valid end states.\n                newSelector();\n                break;\n            default:\n                throw Error(SYNTAX_ERROR);\n        }\n        if (!selectors.length)\n            throw Error(SYNTAX_ERROR);\n        return selectors;\n    };\n    Selector.nextUid = 1;\n    Selector.matchesSelector = (function () {\n        var element = document.createElement('div');\n        if (typeof element['webkitMatchesSelector'] === 'function')\n            return 'webkitMatchesSelector';\n        if (typeof element['mozMatchesSelector'] === 'function')\n            return 'mozMatchesSelector';\n        if (typeof element['msMatchesSelector'] === 'function')\n            return 'msMatchesSelector';\n        return 'matchesSelector';\n    })();\n    return Selector;\n})();\nvar attributeFilterPattern = /^([a-zA-Z:_]+[a-zA-Z0-9_\\-:\\.]*)$/;\nfunction validateAttribute(attribute) {\n    if (typeof attribute != 'string')\n        throw Error('Invalid request opion. attribute must be a non-zero length string.');\n    attribute = attribute.trim();\n    if (!attribute)\n        throw Error('Invalid request opion. attribute must be a non-zero length string.');\n    if (!attribute.match(attributeFilterPattern))\n        throw Error('Invalid request option. invalid attribute name: ' + attribute);\n    return attribute;\n}\nfunction validateElementAttributes(attribs) {\n    if (!attribs.trim().length)\n        throw Error('Invalid request option: elementAttributes must contain at least one attribute.');\n    var lowerAttributes = {};\n    var attributes = {};\n    var tokens = attribs.split(/\\s+/);\n    for (var i = 0; i < tokens.length; i++) {\n        var name = tokens[i];\n        if (!name)\n            continue;\n        var name = validateAttribute(name);\n        var nameLower = name.toLowerCase();\n        if (lowerAttributes[nameLower])\n            throw Error('Invalid request option: observing multiple case variations of the same attribute is not supported.');\n        attributes[name] = true;\n        lowerAttributes[nameLower] = true;\n    }\n    return Object.keys(attributes);\n}\nfunction elementFilterAttributes(selectors) {\n    var attributes = {};\n    selectors.forEach(function (selector) {\n        selector.qualifiers.forEach(function (qualifier) {\n            attributes[qualifier.attrName] = true;\n        });\n    });\n    return Object.keys(attributes);\n}\nvar MutationSummary = (function () {\n    function MutationSummary(opts) {\n        var _this = this;\n        this.connected = false;\n        this.options = MutationSummary.validateOptions(opts);\n        this.observerOptions = MutationSummary.createObserverOptions(this.options.queries);\n        this.root = this.options.rootNode;\n        this.callback = this.options.callback;\n        this.elementFilter = Array.prototype.concat.apply([], this.options.queries.map(function (query) {\n            return query.elementFilter ? query.elementFilter : [];\n        }));\n        if (!this.elementFilter.length)\n            this.elementFilter = undefined;\n        this.calcReordered = this.options.queries.some(function (query) {\n            return query.all;\n        });\n        this.queryValidators = []; // TODO(rafaelw): Shouldn't always define this.\n        if (MutationSummary.createQueryValidator) {\n            this.queryValidators = this.options.queries.map(function (query) {\n                return MutationSummary.createQueryValidator(_this.root, query);\n            });\n        }\n        this.observer = new MutationObserverCtor(function (mutations) {\n            _this.observerCallback(mutations);\n        });\n        this.reconnect();\n    }\n    MutationSummary.createObserverOptions = function (queries) {\n        var observerOptions = {\n            childList: true,\n            subtree: true\n        };\n        var attributeFilter;\n        function observeAttributes(attributes) {\n            if (observerOptions.attributes && !attributeFilter)\n                return; // already observing all.\n            observerOptions.attributes = true;\n            observerOptions.attributeOldValue = true;\n            if (!attributes) {\n                // observe all.\n                attributeFilter = undefined;\n                return;\n            }\n            // add to observed.\n            attributeFilter = attributeFilter || {};\n            attributes.forEach(function (attribute) {\n                attributeFilter[attribute] = true;\n                attributeFilter[attribute.toLowerCase()] = true;\n            });\n        }\n        queries.forEach(function (query) {\n            if (query.characterData) {\n                observerOptions.characterData = true;\n                observerOptions.characterDataOldValue = true;\n                return;\n            }\n            if (query.all) {\n                observeAttributes();\n                observerOptions.characterData = true;\n                observerOptions.characterDataOldValue = true;\n                return;\n            }\n            if (query.attribute) {\n                observeAttributes([query.attribute.trim()]);\n                return;\n            }\n            var attributes = elementFilterAttributes(query.elementFilter).concat(query.attributeList || []);\n            if (attributes.length)\n                observeAttributes(attributes);\n        });\n        if (attributeFilter)\n            observerOptions.attributeFilter = Object.keys(attributeFilter);\n        return observerOptions;\n    };\n    MutationSummary.validateOptions = function (options) {\n        for (var prop in options) {\n            if (!(prop in MutationSummary.optionKeys))\n                throw Error('Invalid option: ' + prop);\n        }\n        if (typeof options.callback !== 'function')\n            throw Error('Invalid options: callback is required and must be a function');\n        if (!options.queries || !options.queries.length)\n            throw Error('Invalid options: queries must contain at least one query request object.');\n        var opts = {\n            callback: options.callback,\n            rootNode: options.rootNode || document,\n            observeOwnChanges: !!options.observeOwnChanges,\n            oldPreviousSibling: !!options.oldPreviousSibling,\n            queries: []\n        };\n        for (var i = 0; i < options.queries.length; i++) {\n            var request = options.queries[i];\n            // all\n            if (request.all) {\n                if (Object.keys(request).length > 1)\n                    throw Error('Invalid request option. all has no options.');\n                opts.queries.push({ all: true });\n                continue;\n            }\n            // attribute\n            if ('attribute' in request) {\n                var query = {\n                    attribute: validateAttribute(request.attribute)\n                };\n                query.elementFilter = Selector.parseSelectors('*[' + query.attribute + ']');\n                if (Object.keys(request).length > 1)\n                    throw Error('Invalid request option. attribute has no options.');\n                opts.queries.push(query);\n                continue;\n            }\n            // element\n            if ('element' in request) {\n                var requestOptionCount = Object.keys(request).length;\n                var query = {\n                    element: request.element,\n                    elementFilter: Selector.parseSelectors(request.element)\n                };\n                if (request.hasOwnProperty('elementAttributes')) {\n                    query.attributeList = validateElementAttributes(request.elementAttributes);\n                    requestOptionCount--;\n                }\n                if (requestOptionCount > 1)\n                    throw Error('Invalid request option. element only allows elementAttributes option.');\n                opts.queries.push(query);\n                continue;\n            }\n            // characterData\n            if (request.characterData) {\n                if (Object.keys(request).length > 1)\n                    throw Error('Invalid request option. characterData has no options.');\n                opts.queries.push({ characterData: true });\n                continue;\n            }\n            throw Error('Invalid request option. Unknown query request.');\n        }\n        return opts;\n    };\n    MutationSummary.prototype.createSummaries = function (mutations) {\n        if (!mutations || !mutations.length)\n            return [];\n        var projection = new MutationProjection(this.root, mutations, this.elementFilter, this.calcReordered, this.options.oldPreviousSibling);\n        var summaries = [];\n        for (var i = 0; i < this.options.queries.length; i++) {\n            summaries.push(new Summary(projection, this.options.queries[i]));\n        }\n        return summaries;\n    };\n    MutationSummary.prototype.checkpointQueryValidators = function () {\n        this.queryValidators.forEach(function (validator) {\n            if (validator)\n                validator.recordPreviousState();\n        });\n    };\n    MutationSummary.prototype.runQueryValidators = function (summaries) {\n        this.queryValidators.forEach(function (validator, index) {\n            if (validator)\n                validator.validate(summaries[index]);\n        });\n    };\n    MutationSummary.prototype.changesToReport = function (summaries) {\n        return summaries.some(function (summary) {\n            var summaryProps = ['added', 'removed', 'reordered', 'reparented',\n                'valueChanged', 'characterDataChanged'];\n            if (summaryProps.some(function (prop) { return summary[prop] && summary[prop].length; }))\n                return true;\n            if (summary.attributeChanged) {\n                var attrNames = Object.keys(summary.attributeChanged);\n                var attrsChanged = attrNames.some(function (attrName) {\n                    return !!summary.attributeChanged[attrName].length;\n                });\n                if (attrsChanged)\n                    return true;\n            }\n            return false;\n        });\n    };\n    MutationSummary.prototype.observerCallback = function (mutations) {\n        if (!this.options.observeOwnChanges)\n            this.observer.disconnect();\n        var summaries = this.createSummaries(mutations);\n        this.runQueryValidators(summaries);\n        if (this.options.observeOwnChanges)\n            this.checkpointQueryValidators();\n        if (this.changesToReport(summaries))\n            this.callback(summaries);\n        // disconnect() may have been called during the callback.\n        if (!this.options.observeOwnChanges && this.connected) {\n            this.checkpointQueryValidators();\n            this.observer.observe(this.root, this.observerOptions);\n        }\n    };\n    MutationSummary.prototype.reconnect = function () {\n        if (this.connected)\n            throw Error('Already connected');\n        this.observer.observe(this.root, this.observerOptions);\n        this.connected = true;\n        this.checkpointQueryValidators();\n    };\n    MutationSummary.prototype.takeSummaries = function () {\n        if (!this.connected)\n            throw Error('Not connected');\n        var summaries = this.createSummaries(this.observer.takeRecords());\n        return this.changesToReport(summaries) ? summaries : undefined;\n    };\n    MutationSummary.prototype.disconnect = function () {\n        var summaries = this.takeSummaries();\n        this.observer.disconnect();\n        this.connected = false;\n        return summaries;\n    };\n    MutationSummary.NodeMap = NodeMap; // exposed for use in TreeMirror.\n    MutationSummary.parseElementFilter = Selector.parseSelectors; // exposed for testing.\n    MutationSummary.optionKeys = {\n        'callback': true,\n        'queries': true,\n        'rootNode': true,\n        'oldPreviousSibling': true,\n        'observeOwnChanges': true\n    };\n    return MutationSummary;\n})();\n\nmodule.exports = MutationSummary\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/mutation-summary/src/mutation-summary.js\n// module id = 47\n// module chunks = 0","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options == 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/uuid/v4.js\n// module id = 48\n// module chunks = 0","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\nvar rng;\n\nvar crypto = global.crypto || global.msCrypto; // for IE 11\nif (crypto && crypto.getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16);\n  rng = function whatwgRNG() {\n    crypto.getRandomValues(rnds8);\n    return rnds8;\n  };\n}\n\nif (!rng) {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var  rnds = new Array(16);\n  rng = function() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n\nmodule.exports = rng;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/uuid/lib/rng-browser.js\n// module id = 49\n// module chunks = 0","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  return  bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\nmodule.exports = bytesToUuid;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/uuid/lib/bytesToUuid.js\n// module id = 50\n// module chunks = 0","export default function(attr){\n  switch (attr.converter) {\n      case \"Number\":\n      case \"String\":\n      case \"Angle2D\":\n      case \"Boolean\":\n        return;\n      case \"Color3\":\n      case \"Color4\":\n          return {\n              name: attr.name.name,\n              value: attr.Value.rawElements,\n              isColor: true\n          };\n      case \"Vector2\":\n      case \"Vector3\":\n      case \"Vector4\":\n          return {\n              name: attr.name.name,\n              value: attr.Value.rawElements,\n              isVector: true,\n              length: [\"Vector2\", \"Vector3\", \"Vector4\"].indexOf(converter) + 2\n          };\n      case \"Rotation3\":\n          return {\n              name: attr.name.name,\n              value: attr.Value.eularAngles.rawElements,\n              isVector: true,\n              length: 3\n          };\n      default:\n          return {\n              name: attr.name.name,\n              value: !!attr.Value ? \"(Object)[Non Editable]\" : \"(null or undefined)[Non Editable]\"\n          };\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/embed/AttributeConverters.js"],"sourceRoot":""}